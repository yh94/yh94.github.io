<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Yu Hang-Blog</title><meta name="keywords" content="博客"><meta name="author" content="Hang Yu"><meta name="copyright" content="Hang Yu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="欢迎来到我的王国">
<meta property="og:type" content="website">
<meta property="og:title" content="Yu Hang-Blog">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Yu Hang-Blog">
<meta property="og:description" content="欢迎来到我的王国">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/touxiang.jpeg">
<meta property="article:author" content="Hang Yu">
<meta property="article:tag" content="博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/touxiang.jpeg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Yu Hang-Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-04-19 18:24:54'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./img/touxiang.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/./img/image1.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Yu Hang-Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Yu Hang-Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/yh94" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/18720982524@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2021/03/10/Redis%E5%85%AD%E7%A7%8D%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="redis底层数据结构"><img class="post_bg" src="/./img/tY3fs1oQKkhNarBr.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="redis底层数据结构"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/10/Redis%E5%85%AD%E7%A7%8D%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="redis底层数据结构">redis底层数据结构</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-09T16:00:00.000Z" title="发表于 2021-03-10 00:00:00">2021-03-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/redis/">redis</a></span></div><div class="content">文章目录
一、简单动态字符串

1、SDS的结构定义


2、SDS和c字符串的区别

1）SDS获取字符串长度复杂度为常数


2）SDS杜绝了缓冲区溢出
3）减少内存重分配次数
4）二进制安全
5）SDS兼容部分c字符串函数
二、双向链表

1、双向链表结构：


2、链表节点结构：
3、Redis的链表实现的特性：
三、字典

1、字典的实现结构



1）哈希表节点


2）哈希表
3）字典
2、哈希算法

MurmurHash2算法


3、哈希表的重新散列（rehash）
四、跳跃表

1、跳跃表节点的结构（zskiplistNode）


2、跳跃表的结构（zskiplist）
五、整数集合

1、整数集合的结构


2、整数集合的升级
六、压缩列表

1、压缩列表的构成


2、压缩列表节点的结构
3、连锁更新

本文将详细介绍Redis的六种底层数据结构：简单动态字符串、双向链表、字典、跳跃表、整数集合和压缩列表。
一、简单动态字符串Redis没有直接使用c语言传统的字符串表示，而是自己构建了一种名为简单动态字符串的可以被修改的抽象类型，并将SDS用作Redis的默认 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/03/05/synchorized%E6%B5%85%E7%90%86%E8%A7%A3/" title="synchorized浅理解"><img class="post_bg" src="https://picsum.photos/id/1010/5184/3456" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="synchorized浅理解"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/05/synchorized%E6%B5%85%E7%90%86%E8%A7%A3/" title="synchorized浅理解">synchorized浅理解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-04T16:00:00.000Z" title="发表于 2021-03-05 00:00:00">2021-03-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/%E9%94%81/">锁</a></span></div><div class="content">synchorized浅理解
首先这是一种互斥锁，也是一种悲观锁，一次只能允许一个线程进入被锁住的代码块（吐槽：这些锁啊锁的是真的多，累了）对象：代码块 ｜ 对象


实例方法 ：锁的是对象实例
静态方法 ：锁的是当前类的class实例
代码块 ： 锁得是传入synchorized的对象实例


我们都知道一个对象分为三块：对象头，对象实际数据，对齐填充（补满8字节）。


对象头：里面有个markword。这里会记住锁的信息，又因为每个对象都会有一个与之对应的monitor对象，这里面存着当前持有锁的线程以及等待锁的线程队列。monitor对象会存储当前id，设置markword的monitor的对象地址，并把阻塞的线程存储到minitor的等待线程队列中

加锁的底层是依赖底层的操作系统的mutex，相关指令实现，有用户态和内核态之间的切换，性能损耗比较明显。
重磅消息：之前是重量级锁，而1.6之后引入了偏向锁和轻量级锁，不依赖系统了，性能得到提升。而markword一共记录了四种状态

偏向锁：jvm认为只有某个线程才会执行同步代码（没有竞争的环境）。所以markword会记录线 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/02/05/%E5%8F%8D%E5%B0%84%E5%92%8C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" title="反射和动态代理"><img class="post_bg" src="/./img/cEH5xSB6OlqdYrtw.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="反射和动态代理"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/05/%E5%8F%8D%E5%B0%84%E5%92%8C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" title="反射和动态代理">反射和动态代理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-04T16:00:00.000Z" title="发表于 2021-02-05 00:00:00">2021-02-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">java</a></span></div><div class="content">反射
反射：在运行时返回给我们类信息。基础用法：创建对象，获取属性名。重点是:[运行时]获取类信息，编写代码都是.java 然后编译成.class, .class文件会被jvm装载运行，这里运行的就叫做运行时。理解反射，既要抽象。先介绍一下 工具，组件，框架。


工具：util类
组件：jar包
框架：组件发展壮大
例如SpringMVC 你在方法上写上对象，传入的参数就会帮你封装到对象上Mybatis可以让我们只写接口，不写实现类，就可以执行SQL你在类上加上@Component注解，Spring就帮你创建对象这些统统都有反射的身影：约定大于配置，配置大于硬编码。

动态代理
动态代理其实就是代理模式的一种，代理模式是设计模式之一,代理模型有静态代理和动态代理。静态代理需要自己写代理类，实现对应的接口，比较麻烦。



在Java中，动态代理常见的又有两种实现方式：JDK动态代理和CGLIB代理.JDK动态代理其实就是运用了反射的机制，而CGLIB代理则用的是利用ASM框架，通过修改其字节码生成子类来处理DK动态代理会帮我们实现接口的方法，通过invokeHandler对所需要的方 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/01/03/Spring-IOC%E6%BA%90%E7%A0%81/" title="Spring IOC 容器源码分析"><img class="post_bg" src="/./img/tY3fs1oQKkhNarBr.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring IOC 容器源码分析"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/03/Spring-IOC%E6%BA%90%E7%A0%81/" title="Spring IOC 容器源码分析">Spring IOC 容器源码分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-02T16:00:00.000Z" title="发表于 2021-01-03 00:00:00">2021-01-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">java</a></span></div><div class="content">回首页
Spring IOC 容器源码分析
Spring 最重要的概念是 IOC 和 AOP，本篇文章其实就是要带领大家来分析下 Spring 的 IOC 容器。既然大家平时都要用到 Spring，怎么可以不好好了解 Spring 呢？阅读本文并不能让你成为 Spring 专家，不过一定有助于大家理解 Spring 的很多概念，帮助大家排查应用中和 Spring 相关的一些问题。
本文采用的源码版本是 4.3.11.RELEASE，算是 5.0.x 前比较新的版本了。为了降低难度，本文所说的所有的内容都是基于 xml 的配置的方式，实际使用已经很少人这么做了，至少不是纯 xml 配置，不过从理解源码的角度来看用这种方式来说无疑是最合适的。
阅读建议：读者至少需要知道怎么配置 Spring，了解 Spring 中的各种概念，少部分内容我还假设读者使用过 SpringMVC。本文要说的 IOC 总体来说有两处地方最重要，一个是创建 Bean 容器，一个是初始化 Bean，如果读者觉得一次性看完本文压力有点大，那么可以按这个思路分两次消化。读者不一定对 Spring 容器的源码感兴趣，也许附 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2020/12/10/G1%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8/" title="G1垃圾回收器"><img class="post_bg" src="/./img/Gz6mGZmIsFQawF3T.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="G1垃圾回收器"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/12/10/G1%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8/" title="G1垃圾回收器">G1垃圾回收器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-09T16:00:00.000Z" title="发表于 2020-12-10 00:00:00">2020-12-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">java</a></span></div><div class="content">G1 垃圾收集器介绍
之前根据 Sun 的内存管理白皮书介绍了在 HotSpot JVM 分代算法中的几个垃圾收集器，本文将介绍 G1 垃圾收集器。
G1 的主要关注点在于达到可控的停顿时间，在这个基础上尽可能提高吞吐量，这一点非常重要。
G1 被设计用来长期取代 CMS 收集器，和 CMS 相同的地方在于，它们都属于并发收集器，在大部分的收集阶段都不需要挂起应用程序。区别在于，G1 没有 CMS 的碎片化问题（或者说不那么严重），同时提供了更加可控的停顿时间。
如果你的应用使用了较大的堆（如 6GB 及以上）而且还要求有较低的垃圾收集停顿时间（如 0.5 秒），那么 G1 是你绝佳的选择，是时候放弃 CMS 了。
阅读建议：本文力求用简单的话介绍清楚 G1 收集器，但是并不会重复介绍每一个细节，所以希望读者了解其他几个收集器的工作过程，尤其是 CMS 收集器。
G1 总览首先是内存划分上，之前介绍的分代收集器将整个堆分为年轻代、老年代和永久代，每个代的空间是确定的。
而 G1 将整个堆划分为一个个大小相等的小块（每一块称为一个 region），每一块的内存是连续的。和分代算法一样，G ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2020/10/10/CMS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/" title="CMS垃圾回收器"><img class="post_bg" src="/./img/CBbAorRdXo4xRS0l.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CMS垃圾回收器"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/10/10/CMS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/" title="CMS垃圾回收器">CMS垃圾回收器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-10-09T16:00:00.000Z" title="发表于 2020-10-10 00:00:00">2020-10-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">java</a></span></div><div class="content">CMS垃圾回收器
CMS叫做并发标记清除。用CMS对比 Seria和Parallel 和 ParNew ：最大的的不同点就是并发：在GC线程工作的时候，用户线程不会完全停止，用户线程在部分场景下与GC线程一起并发执行。CMS设计目标：避免老年代长时间卡顿。

CMS分为5个步骤：初始标记，并发标记，并发预清理，重新标记，以及并发清除。不难看出cms，使用了【标记清除】垃圾回收算法

初始标记 ：会标记GCroots直接关联的对象和年轻代指向老年代的对象，过程比较快，初始标记这个过程是会发生stw。

为什么要扫描年轻代，因为回收老年代，年轻代可能会指向老年代。

并发标记：这个过程是不会停止用户线程的（stw），这一阶段主要进行可达性分析，因为要追溯所以比较耗时间。
并发预清理：希望能减少下一个阶段【重新标记】的时间，因为上一个阶段【并发标记】线程是没有被挂起的，导致对象之间和对象本身的root发生了改变，有几种情况
新生代变成了老年代
有些对象直接分到了老年代
老年代和新生代之间对象引用发生了变化针对老年代的对象可以借助card table存储，将老年代发生的卡页标记为dirty，所 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2020/10/06/synchronized%E5%92%8Creentrantlock%E5%8C%BA%E5%88%AB/" title="synchronized和reentrantlock区别"><img class="post_bg" src="/./img/CBbAorRdXo4xRS0l.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="synchronized和reentrantlock区别"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/10/06/synchronized%E5%92%8Creentrantlock%E5%8C%BA%E5%88%AB/" title="synchronized和reentrantlock区别">synchronized和reentrantlock区别</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-10-06T02:57:12.000Z" title="发表于 2020-10-06 10:57:12">2020-10-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/%E9%94%81/">锁</a></span></div><div class="content">基本概念1、ReentrantLock 拥有Synchronized相同的并发性和内存语义，此外还多了 锁投票，定时锁等候和中断锁等候
 线程A和B都要获取对象O的锁定，假设A获取了对象O锁，B将等待A释放对O的锁定，

 如果使用 synchronized ，如果A不释放，B将一直等下去，不能被中断

 如果 使用ReentrantLock，如果A不释放，可以使B在等待了足够长的时间以后，中断等待，而干别的事情

ReentrantLock获取锁定与三种方式：  
a)  lock(), 如果获取了锁立即返回，如果别的线程持有锁，当前线程则一直处于休眠状态，直到获取锁

b) tryLock(), 如果获取了锁立即返回true，如果别的线程正持有锁，立即返回false；

c)**tryLock**(long timeout,[TimeUnit](http://houlinyan.iteye.com/java/util/concurrent/TimeUnit.html &quot;java.util.concurrent 中的枚举&quot;) unit)，   如果获取了锁定立即返 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2020/05/30/%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/" title="磁盘扩容"><img class="post_bg" src="/./img/Gz6mGZmIsFQawF3T.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="磁盘扩容"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/05/30/%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/" title="磁盘扩容">磁盘扩容</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-05-29T16:00:00.000Z" title="发表于 2020-05-30 00:00:00">2020-05-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%B3%BB%E7%BB%9F/">系统</a></span></div><div class="content">[案例]如何磁盘扩容
背景：日常工作中经常会遇到磁盘空间不足的情况，在服务器磁盘不足的情况中通常使用最快以及最灵活的lvm扩容方式进行


问题：如何通过lvm扩容磁盘，一般形式通过fdisk初始化挂载硬盘，然后通过pvc及vge相关命令进行相关磁盘格式处理，最后完成挂载


处理方法 通过fdisk命令初始化挂载的硬盘（fdisk &#x2F;dev&#x2F;vda）并且输入n进入新增磁盘步骤。Partition type部分输入p新增磁盘，随后进入选择分区号，可以直接回车默认分区号（此时需记录对应分区号，后面找磁盘方便），紧接着进入扇区编辑步骤，可根据需要扩容大小分配起始扇区及last扇区，完成后此两数值差为此磁盘大小。完成以上步骤后输入w保存所有操作，如操作过程有误可按ctrl c退出命令不保存相关操作。至此为之已完成磁盘初始化，此时需重启电脑重新挂载该磁盘生效相关配置。重启完毕后可以通过lsblk或者df -h找到分区后磁盘名字如vda3,此时可通过pvcreate 对应磁盘名字（&#x2F;dev&#x2F;vda3）进行pv创建。创建完毕后需查看需扩容磁盘所属group， ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2020/05/10/CAS/" title="CAS简单了解"><img class="post_bg" src="/./img/tY3fs1oQKkhNarBr.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CAS简单了解"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/05/10/CAS/" title="CAS简单了解">CAS简单了解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-05-09T16:00:00.000Z" title="发表于 2020-05-10 00:00:00">2020-05-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/%E9%94%81/">锁</a></span></div><div class="content">CAS
CAS：compare and swap是一个原子性操作，对应cpu指令 cmpxchgCAS 有三个操作数：


当前值A
内存值V
要修改的新值B 123456update A -&gt; Bif(A == V) &#123; //判断当前值和内存值是否相等   V == B&#125;else&#123;   //重试，或者放弃更新&#125;
123456789101112public class AtomicDemo &#123; public static int NUMBER = 0; public static void increase() &#123;     NUMBER++; &#125; public static void main(String[] args) throws InterruptedException &#123; AtomicDemo test = new AtomicDemo(); for (int i = 0; i &lt; 10; i++) &#123; new Thread(() -&gt; &#123; for (int  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/09/16/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%AF%A6%E8%A7%A3/" title="负载均衡详解"><img class="post_bg" src="/./img/lKKp6BFFAriR7u6J.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="负载均衡详解"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/09/16/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%AF%A6%E8%A7%A3/" title="负载均衡详解">负载均衡详解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-09-15T16:00:00.000Z" title="发表于 2019-09-16 00:00:00">2019-09-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%B3%BB%E7%BB%9F/">系统</a></span></div><div class="content">负载均衡介绍
负载均衡，英文名称为Load Balance，指由多台服务器以对称的方式组成一个服务器集合，每台服务器都具有等价的地位，都可以单独对外提供服务而无须其他服务器的辅助。通过某种负载分担技术，将外部发送来的请求均匀分配到对称结构中的某一台服务器上，而接收到请求的服务器独立地回应客户的请求。负载均衡能够平均分配客户请求到服务器阵列，借此提供快速获取重要数据，解决大量并发访问服务问题，这种集群技术可以用最少的投资获得接近于大型主机的性能。

负载均衡方式
负载均衡分为软件负载均衡和硬件负载均衡

软件负载均衡
常见的负载均衡软件有Nginx、LVS、HAProxy。

硬件负载均衡
常见的负载均衡硬件有Array、F5。

负载均衡算法
定义一个服务器列表，每个负载均衡的算法会从中挑出一个服务器作为算法的结果。

123456789101112131415161718192021222324252627public class ServerIps &#123;﻿    private static final List&lt;String&gt; LIST = Arrays.as ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./img/touxiang.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Hang Yu</div><div class="author-info__description">欢迎来到我的王国</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yh94"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/yh94" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/18720982524@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">人无再少年</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/04/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%BD%91%E5%9D%80/" title="数据结构网址"><img src="/./img/Gz6mGZmIsFQawF3T.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据结构网址"/></a><div class="content"><a class="title" href="/2022/04/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%BD%91%E5%9D%80/" title="数据结构网址">数据结构网址</a><time datetime="2022-04-18T07:24:58.988Z" title="发表于 2022-04-18 15:24:58">2022-04-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/16/%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%AA%E6%8F%92%E4%BB%B6(%E4%BB%A3%E7%A0%81%E7%A5%9E%E5%99%A8)/" title="idea代码神器"><img src="https://picsum.photos/id/367/4928/3264" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="idea代码神器"/></a><div class="content"><a class="title" href="/2022/03/16/%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%AA%E6%8F%92%E4%BB%B6(%E4%BB%A3%E7%A0%81%E7%A5%9E%E5%99%A8)/" title="idea代码神器">idea代码神器</a><time datetime="2022-03-16T07:30:10.000Z" title="发表于 2022-03-16 15:30:10">2022-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/05/%E7%9F%AD%E9%93%BE%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/" title="短链接服务系统开发？"><img src="https://picsum.photos/id/367/4928/3264" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="短链接服务系统开发？"/></a><div class="content"><a class="title" href="/2022/02/05/%E7%9F%AD%E9%93%BE%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/" title="短链接服务系统开发？">短链接服务系统开发？</a><time datetime="2022-02-04T16:00:00.000Z" title="发表于 2022-02-05 00:00:00">2022-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/05/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="多线程简单聊聊？"><img src="https://picsum.photos/id/366/4000/3000" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="多线程简单聊聊？"/></a><div class="content"><a class="title" href="/2021/12/05/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="多线程简单聊聊？">多线程简单聊聊？</a><time datetime="2021-12-04T16:00:00.000Z" title="发表于 2021-12-05 00:00:00">2021-12-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/02/rabbitmq%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF/" title="如何保证消息的可靠性传输？（如何处理消息丢失的问题）"><img src="https://picsum.photos/id/367/4928/3264" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何保证消息的可靠性传输？（如何处理消息丢失的问题）"/></a><div class="content"><a class="title" href="/2021/12/02/rabbitmq%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF/" title="如何保证消息的可靠性传输？（如何处理消息丢失的问题）">如何保证消息的可靠性传输？（如何处理消息丢失的问题）</a><time datetime="2021-12-01T16:00:00.000Z" title="发表于 2021-12-02 00:00:00">2021-12-02</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/http/"><span class="card-category-list-name">http</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java/"><span class="card-category-list-name">java</span><span class="card-category-list-count">16</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java/redis/"><span class="card-category-list-name">redis</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"><span class="card-category-list-name">多线程</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java/%E5%B9%B6%E5%8F%91/"><span class="card-category-list-name">并发</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java/%E6%80%A7%E8%83%BD/"><span class="card-category-list-name">性能</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="card-category-list-name">数据结构</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java/%E9%94%81/"><span class="card-category-list-name">锁</span><span class="card-category-list-count">3</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/java/" style="font-size: 1.45em; color: rgb(130, 39, 136)">java</a><a href="/tags/%E9%94%81/" style="font-size: 1.3em; color: rgb(181, 60, 104)">锁</a><a href="/tags/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" style="font-size: 1.3em; color: rgb(43, 92, 194)">垃圾回收</a><a href="/tags/jvm/" style="font-size: 1.3em; color: rgb(21, 46, 163)">jvm</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(103, 189, 122)">netty</a><a href="/tags/redis/" style="font-size: 1.3em; color: rgb(17, 17, 165)">redis</a><a href="/tags/sql%E8%B0%83%E4%BC%98/" style="font-size: 1.15em; color: rgb(35, 189, 131)">sql调优</a><a href="/tags/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 1.15em; color: rgb(18, 24, 109)">消息中间件</a><a href="/tags/idea/" style="font-size: 1.15em; color: rgb(27, 115, 124)">idea</a><a href="/tags/%E6%8F%92%E4%BB%B6/" style="font-size: 1.15em; color: rgb(45, 87, 121)">插件</a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.15em; color: rgb(90, 193, 94)">多线程</a><a href="/tags/spring/" style="font-size: 1.15em; color: rgb(91, 148, 134)">spring</a><a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 1.15em; color: rgb(26, 19, 123)">框架</a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.15em; color: rgb(110, 37, 185)">数据结构</a><a href="/tags/http/" style="font-size: 1.15em; color: rgb(163, 70, 191)">http</a><a href="/tags/%E7%B3%BB%E7%BB%9F/" style="font-size: 1.15em; color: rgb(115, 102, 111)">系统</a><a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 1.15em; color: rgb(195, 68, 114)">架构</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">21</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-07-04T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-04-19T10:24:54.055Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2022 By Hang Yu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Can I make a friend with you ？</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    window.typed = new Typed("#subtitle", {
      strings: ["我们知道自己是谁，但不知道自己能成为谁"],
      startDelay: 300,
      typeSpeed: 150,
      loop: false,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '我们知道自己是谁，但不知道自己能成为谁'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>